# Навык Алисы для Яндекс Облака на Kotlin

> Использует [фреймворк JAICF](https://github.com/just-ai/jaicf-kotlin/tree/master/channels/yandex-alice)

## Как запустить

Можно запускать/дебажить локально и затем заливать на Яндекс Облако.

### Локальный запуск

Запустите в вашем IDE файл `Dev.kt`.
Вебхук Алисы запустится на порту `8080` по умолчанию.

Далее запустите [ngrok](https://ngrok.com/) чтобы создать публичный доступ к вашему вебхуку

`ngrok http 8080`

Полученный URL используйте в качестве вебхука в настройках навыка в [консоли Алисы](https://dialogs.yandex.ru/developer/).
Все запросы из консоли Алисы будут приходить на ваш ПК.

### Загрузка в Яндекс Облако

1. Создайте новую функцию в [Яндекс Облаке](https://console.cloud.yandex.ru/) в окружении Java 11.
2. Соберите ваш проект с помощью maven команды `mvn assembly:single`
3. Загрузите в облако ZIP файл из директории _target_.
4. В качестве _Точки входа_ укажите `com.example.ParrotFunction` и нажмите на _Создать версию_.
Облако автоматически соберет ваш проект и запустит вашу функцию.
5. В консоли Алисы переключите в настройках вебхук на вашу функцию в Яндекс Облаке.

## OAuth token

Если вы используете звуки и картинки в вашем навыке, то вам понадобится OAuth Token.
Его можно [получить здесь](https://oauth.yandex.ru/authorize?response_type=token&client_id=c473ca268cd749d3a8371351a8f2bcbd).

Скопируйте его и создайте переменную окружения `OAUTH_TOKEN`.

_Не забудьте создать такую же переменную окружения в вашей функции на Яндекс Облаке._

## NLU и другие настройки

Вы можете использовать различные NLU движки с вашим навыком.
Пожалуйста, изучите [документацию по фреймворку JAICF](https://github.com/just-ai/jaicf-kotlin/tree/master/channels/yandex-alice), чтобы узнать, как это делать.

